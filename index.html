<!DOCTYPE html>
<html>
<head>
	<title>Moon Phase Calculator</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/astronomia@2.0.0/dist/astronomia.min.js"></script>
</head>
<body>
	<h1>Moon Phase Calculator</h1>
	<p>Enter your birthdate to calculate your moon phase:</p>
	<form onsubmit="calculateMoonPhase(); return false;">
		<label for="birthdate">Birthdate:</label>
		<input type="date" id="birthdate" name="birthdate">
		<button type="submit">Calculate</button>
	</form>
	<div id="moon-phase"></div>
	<script>
		function calculateMoonPhase() {
			const birthdate = moment(document.getElementById("birthdate").value, "YYYY-MM-DD");
			const moonIllumination = Astronomical.MoonIllumination(birthdate.toDate()).fraction;
			const moonPhase = getMoonPhase(moonIllumination);
			document.getElementById("moon-phase").innerHTML = "On your birthdate, the moon was in the " + moonPhase + " phase.";
		}

		function getMoonPhase(moonIllumination) {
			if (moonIllumination < 0.125) {
				return "New";
			} else if (moonIllumination < 0.25) {
				return "Waxing Crescent";
			} else if (moonIllumination < 0.375) {
				return "First Quarter";
			} else if (moonIllumination < 0.5) {
				return "Waxing Gibbous";
			} else if (moonIllumination < 0.625) {
				return "Full";
			} else if (moonIllumination < 0.75) {
				return "Waning Gibbous";
			} else if (moonIllumination < 0.875) {
				return "Third Quarter";
			} else {
				return "Waning Crescent";
			}
		}
	</script>
</body>
</html>
